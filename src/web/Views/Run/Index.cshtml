@model PagedViewModel<RunDetailViewModel>
@{
    ViewData["Title"] = "All Runs";
}

<div class="row mb-3 py-2">
    <div class="col-md-1 my-1">Id</div>
    <div class="col-md-2 my-1">Task Name</div>
    <div class="col-md-2 my-1">Started At</div>
    <div class="col-md-2 my-1">Completed At</div>
    <div class="col-md-2 my-1">Elapsed</div>
    <div class="col-md-1 my-1">Status</div>
    <div class="col-md-2 my-1">Action</div>
</div>

@foreach (var item in Model.Items)
{
    <div class="row mb-3 bg-light py-2">
        <div class="col-md-1 my-1">#@item.Run.Id</div>
        <div class="col-md-2 my-1">@item.TaskName (<a href="/task/@item.Run.TaskId">#@item.Run.TaskId</a>)</div>
        <div class="col-md-2 my-1">@Html.Raw(item.Run.GetStartAtHtml())</div>
        <div class="col-md-2 my-1">@Html.Raw(item.Run.GetCompletedAtHtml())</div>
        <div class="col-md-2 my-1">@Html.Raw(item.Run.GetElapsedHtml(true))</div>
        <div class="col-md-1 my-1">@item.Run.Status</div>
        <div class="col-md-2 my-1">
            <a type="button" class="btn btn-primary btn-sm mx-1 mb-1" href="/run/@item.Run.Id"><i class="fa-solid fa-circle-info"></i> Detail</a>
            @if (item.Run.Status == PikaTaskStatus.Running)
            {
                <button class="btn btn-danger btn-sm mx-1 mb-1" onclick="stopRun('@item.Run.Id')"><i class="fa-solid fa-stop"></i> Stop</button>
            }
        </div>
    </div>
}

<page total-pages="@Model.TotalPages" current-page="@Model.CurrentPage" url="@Model.Url"></page>

@section Scripts{
    <script>
        setActive("runNav");
    </script>
}